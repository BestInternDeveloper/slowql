# SlowQL

RDBMS written in Haskell for fun (and for suffering).

## 文件系统

### 基本思路

SlowQL重新实现了基于LRU缓存的文件系统，并提供了供上层使用的IO Monad接口，这使得上层数据库逻辑能够与底层文件的管理解耦合，并且能够使用无副作用的纯函数实现。

### 惰性IO

分页文件系统满足以下性质：当文件被文件系统打开时，一些IO操作与纯函数具有类似的性质。

1. 在只有读操作的情况下，对``SlowQL.PageFS.readPage``的调用总会产生相同的值。
2. 在同时有读写操作的情况下，读页面会导致读入“最新”的页面状态。

因此我们可以认为“读取页面”的操作是一个惰性的IO操作，即它可以在任意位置、以任意顺序按照需要调用。考虑到Haskell默认IO的强制立即求值性质，我们使用``unsafeInterleaveIO``来包装读页面的函数使得它能够参与到惰性求值中。

## 记录管理（表管理）

### 接口

记录管理系统提供了查询、单个插入和单点修改（删除）的接口。

查询功能，SlowQL提供了查询接口foldrQuery（即reduce操作），用于抽象“对数据表的顺序访问操作”。此外，SlowQL还支持单点插入、删除单条数据的操作。

## 索引管理

## 系统管理

## 查询解析

## 附加内容